
<!DOCTYPE html>
<html lang="en-us">

<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta property="og:title" content=" Bespin in Titanium: From The Jaws Of Victory... &middot;  The Nexus" />
    <meta property="og:site_name" content="The Nexus" />
    <meta property="og:url" content="http://zteo.com/posts/bespin-in-titanium-from-the-jaws-of-victory/" />

    
    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content="2009-04-06T07:31:59Z" />
    

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta name="twitter:title" content="Bespin in Titanium: From The Jaws Of Victory..." />
    
    <meta name="twitter:description" content="bespin is really an intriguing project. Since I&rsquo;ve grown frustrated with the inconsistencies between the various code editors that I have been using &ndash; I work on Leopard at home and Ubuntu at work &ndash; I thought that creating my own editor would be the answer to that. Nothing fancy, mind you. Just something consistent.
My first impulse was to use Flex. And it almost worked! Using mx:html I was able to wrap a nice web page in an otherwise very ActionScript-y application." />
    <meta name="twitter:url" content="http://zteo.com/posts/bespin-in-titanium-from-the-jaws-of-victory/" />
    

    <title> Bespin in Titanium: From The Jaws Of Victory... &middot;  The Nexus</title>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="preload" href="http://zteo.com//js/main.js" as="script" />
    <link rel="preload" href="http://zteo.com//css/main.css" as="style" />
    
    <link href="/mermaid/mermaid.cfr.css?1550962214" type="text/css" rel="stylesheet" />
    
    
    <link rel="preload" href="http://zteo.com//css/cfr.css" as="style" />
    <link rel="stylesheet" href="http://zteo.com//css/main.css">
    <link rel="stylesheet" href="http://zteo.com//css/cfr.css">
    <link rel="stylesheet" href="http://zteo.com//css/syntax.css">
    
    
    


    
    <meta name="description" content="Bespin in Titanium: From The Jaws Of Victory..." />
    

    
    <meta name="p:domain_verify" content=""/>
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    

    
    <link href="http://zteo.com/index.xml" rel="alternate" type="application/rss+xml" title="The Nexus" />
    

    
    <link rel="canonical" href="http://zteo.com/posts/bespin-in-titanium-from-the-jaws-of-victory/" />

    
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "http://zteo.com/posts/bespin-in-titanium-from-the-jaws-of-victory/"
        },
        "headline": "Bespin in Titanium: From The Jaws Of Victory...",
        "description": "Bespin in Titanium: From The Jaws Of Victory...",
        "author": {
            "@type": "Person",
            "name": " ",
            "url": "http://profiles.google.com/?rel=author",
            "image": {
              "@type": "ImageObject",
              "url": "https:",
              "height": 80,
              "width": 80
            }
        },
        "publisher": {
          "@type": "Organization",
          "@id": "http://zteo.com/",
          "name": "The Nexus",
          "url": "http://zteo.com/",
          "logo": {
            "@type": "ImageObject",
            "url": "https:",
            "height": 80,
            "width": 80
          }
        },
        
        "image": {
          "@type": "ImageObject",
          "url": "",
          "height": 80,
          "width": 80
        },
        "datePublished": "2009-04-06",
        "dateModified": "2009-04-06",
        "wordCount": 324,
        
    }
    </script>
    

    
    <script type="text/javascript">
        
        
    </script>
    

    <script type="text/javascript">
        var config = {
            baseUrl: "http:\/\/zteo.com\/"
        };
    </script>

</head>
<body class="home-template">
<div id="loader-wrapper">
    <div id="loader"></div>
</div>
<section id="wrapper" style="display: none;">
    <div id="ajax-container">
        <nav id="nav" class="nav">
            <div class="nav-logo">
                <a href="http://zteo.com/">
                    
                    The Nexus
                    
                </a>
            </div>

            <nav id="nav2" role="navigation">
                <a href="#nav" title="Show navigation">Show navigation</a>
                <a href="#" title="Hide navigation">Hide navigation</a>
                <ul class="clearfix">
                    <li><a href="http://zteo.com/">BLOG</a></li>
                    <li>
                        <a href="http://zteo.com/meta/about" aria-haspopup="true"><span>ABOUT</span></a>
                        <ul>
                            <li><a href="http://zteo.com/meta/egosurfing">Ego Surfing</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="http://zteo.com/projects/projects-list" aria-haspopup="true"><span>PROJECTS</span></a>
                        <ul>
                            <li><a href="http://zteo.com/projects/n2">n2</a></li>
                            <li><a href="http://zteo.com/projects/s2ajax">S2ajax</a></li>
                            <li><a href="http://zteo.com/projects/condo">Condo</a></li>
                            <li><a href="http://zteo.com/projects/ezedit">ezEdit</a></li>
                            <li><a href="http://zteo.com/projects/freeblog">FreeBlog - Air</a></li>
                            <li><a href="http://zteo.com/projects/tooredo-alpha">Tooredo Alpha</a></li>
                            <li><a href="http://zteo.com/projects/tools">Tools</a></li>
                            <li><a href="http://zteo.com/projects/journler-again">Journlr, Again!</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>


            <div id="main-menu" class="nav-menu">
                
                
                <a id="search-button" onclick="$('#search-form').toggle();" title="Search"><i class="fa fa-search"></i></a>
                <form id="search-form" method="get" role="search" action="https://google.com/search">
                    <input type="hidden" name="as_sitesearch" value="http://zteo.com/">
                    <input type="text" name="q" maxlength="255" placeholder="Search..." class="form-control">
                    <input type="submit" value="Search">
                </form>
                
                
                
                
            </div>
        </nav>


<main class="content" role="main">
    <article class="post post-with-bg">
        <div class="inner">

            <div id="push">

                <header class="post-header">
                
                    <span class="post-meta">
                        <span class="post-date">6 Apr 2009</span> <span class="reading-time">| <span class="estimated-reading-time">2 min.</span> (<span class="word-count">324</span> words)</span></span>
                    </span>
                <div class="clear"></div>
                
                <h1 class="post-title">Bespin in Titanium: From The Jaws Of Victory...</h1>
              </header>

              <section class="post-content">
                

                
                
                

                <p><a href="https://bespin.mozilla.com/">bespin</a> is really an intriguing project. Since
I&rsquo;ve grown frustrated with the inconsistencies between the various code
editors that I have been using &ndash; I work on Leopard at home and Ubuntu at work
&ndash; I thought that creating my own editor would be the answer to that. Nothing
fancy, mind you. Just something consistent.</p>

<p>My first impulse was to use Flex. And it almost worked! Using <code>mx:html</code> I was
able to wrap a nice web page in an otherwise very ActionScript-y application.<br />
And then, catastrophe! Flex Webkit&rsquo;s canvas implementation is subpar and I
could only get a very mamed version of bespin. Nothing usable, anyway.</p>

<p>Thus, I turned to <a href="http://titaniumapp.com/">Titanium</a>.<br />
After some light trial and error, I got it to work!</p>

<p>Unfortunately, the result is less than awesome: Titanium&rsquo;s Webkit gets easily
overwhelmed and, worse, crashes reliably ( :g: ) as soon as I ask it to do
some medium lifting.</p>

<p>This video shows the original victory followed by the vexing defeat:</p>

<p>Note that, to get it to work, I replaced <em>embed.js</em> with my own version that
works around any <code>dojo.request()/eval</code> issue:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>  
    <span class="c1">// -- Load Script  
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">loadme</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>  
    <span class="kd">var</span> <span class="nx">loadScript</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onload</span><span class="p">)</span> <span class="p">{</span>  
        <span class="kd">var</span> <span class="nx">embedscript</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span>  
        <span class="nx">embedscript</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&#34;text/javascript&#34;</span><span class="p">;</span>  
        <span class="nx">embedscript</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>  
        <span class="nx">embedscript</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">onload</span><span class="p">;</span>  
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;head&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">embedscript</span><span class="p">);</span>  
    <span class="p">}</span>  
    <span class="kd">var</span> <span class="nx">onScriptLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>  
        <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">loadme</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>  
        <span class="k">if</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span>  
            <span class="nx">loadScript</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onScriptLoaded</span><span class="p">);</span>  
    <span class="p">}</span>  
        
    <span class="kd">var</span> <span class="nx">componentRequires</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.bespin&#34;</span><span class="p">);</span>  
            
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.canvas&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.keys&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.navigate&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.path&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.tokenobject&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.util&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.mousewheelevent&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.util.urlbar&#34;</span><span class="p">);</span>  
            
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.client.filesystem&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.client.settings&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.client.status&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.client.server&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.client.session&#34;</span><span class="p">);</span>  
            
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.actions&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.clipboard&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.cursor&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.editor&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.events&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.model&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.toolbar&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.themes&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.undo&#34;</span><span class="p">);</span>  
            
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.syntax.base&#34;</span><span class="p">);</span>   
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.syntax.simple._base&#34;</span><span class="p">);</span>  
            
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.cmd.commandline&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.cmd.commands&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.cmd.editorcommands&#34;</span><span class="p">);</span>  
            
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;th.helpers&#34;</span><span class="p">);</span> <span class="c1">// -- Thunderhead... hooooo  
</span><span class="c1"></span>        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;th.css&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;th.th&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;th.models&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;th.borders&#34;</span><span class="p">);</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;th.components&#34;</span><span class="p">);</span>        
    <span class="p">}</span>  
        
    <span class="nx">loadScript</span><span class="p">(</span><span class="s2">&#34;js/dojo/dojo.js.uncompressed.js&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>            
            <span class="nx">loadme</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;js/&#39;</span> <span class="o">+</span> <span class="nx">src</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\./g</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.js&#39;</span><span class="p">);</span>  
        <span class="p">}</span>  
        <span class="nx">componentRequires</span><span class="p">();</span>  
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;bespin.editor.component&#34;</span><span class="p">);</span>  
        <span class="nx">loadScript</span><span class="p">(</span><span class="nx">loadme</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">onScriptLoaded</span><span class="p">);</span>  
    <span class="p">});</span>  
<span class="p">})();</span>  
</code></pre></div>
<p>As you can see, I override dojo.request() with my own, stack up all the
component names, then load them one by one, waiting for each to be fully
loaded before moving on.</p>

              </section>

              <footer class="post-footer">
                  <div class="post-tags">
            
                  </div>
                
              </footer>

            
                <aside class="post-comments">
    
    
    
</aside>

            
            </div>

            <nav class="post-nav">
                
                    <a class="post-nav-item post-nav-next" href="http://zteo.com/posts/determining-if-an-ip-is-within-a-specific-range-redux/">
                        <section class="post-nav-teaser">
                            <span class="post-nav-icon"><i class="fa fa-chevron-left"></i></span>
                            <span class="post-nav-info">
                                <h4 class="post-nav-title">Determining if an IP is within a specific range: redux</h4>
                            </span>
                        </section>
                    </a>
                
                
                    <a class="post-nav-item post-nav-prev" href="http://zteo.com/posts/twitterified-v13-is-out-bug-fixes-usability-improvements-presently-support/">
                        <section class="post-nav-teaser">
                            <span class="post-nav-icon"><i class="fa fa-chevron-right"></i></span>
                            <span class="post-nav-info">
                                <h4 class="post-nav-title">Twitterified v1.3 is out: bug fixes, usability improvements, Present.ly support</h4>
                            </span>
                        </section>
                    </a>
                
                <div class="clear"></div>
            </nav>

        </div>
    </article>
</main>

                <div id="body-class" style="display: none;"></div>
                <footer id="footer">
                    <section class="credits">
                        <span class="credits-license"><i class="fa fa-copyright"></i>2019 The Nexus
                    </span>
                    </section>
                </footer>
                

                

                
                <div class="overlay"></div>
            </div>
        </section>

<video autoplay loop id="video-background" muted plays-inline>
<source src="http://zteo.com/images/hd0198.mp4" type="video/mp4">
</video>

<script src="/mermaid/mermaid.js?1550962214"></script>
<script async src="http://zteo.com//js/main.js"></script>

<script>


function defer(method) {
    if (window.jQuery) {
        method();
    } else {
        setTimeout(function() { defer(method) }, 50);
    }
}
defer(function() {
    jQuery.fn.doubleTapToGo = function( params ) {
        if( !( 'ontouchstart' in window ) &&
            !navigator.msMaxTouchPoints &&
            !navigator.userAgent.toLowerCase().match( /windows phone os 7/i ) ) return false;

        this.each( function()
        {
            var curItem = false;

            jQuery( this ).on( 'click', function( e )
            {
                var item = jQuery( this );
                if( item[ 0 ] != curItem[ 0 ] )
                {
                    e.preventDefault();
                    curItem = item;
                }
            });

            jQuery( document ).on( 'click touchstart MSPointerDown', function( e )
            {
                var resetItem = true,
                    parents	  = jQuery( e.target ).parents();

                for( var i = 0; i < parents.length; i++ )
                    if( parents[ i ] == curItem[ 0 ] )
                        resetItem = false;

                if( resetItem )
                    curItem = false;
            });
        });
        return this;
    };
    jQuery( '#nav li:has(ul)' ).doubleTapToGo();
});
</script>

<script>
    mermaid.initialize({ startOnLoad: true });
</script>




  <noscript><link rel="stylesheet" href="http://zteo.com//css/main.css"></noscript>
</body>
</html>

